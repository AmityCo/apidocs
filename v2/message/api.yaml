query:
  summary: Query messages.
  tags:
    - Admin
  security:
    - BearerAuth: []
  consumes:
    - application/json
  requestBody:
    description: >
      condition for querying
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            channelId:
              type: string
            parentId:
              type: string
            filterByParentId:
              type: boolean
            tags:
              type: array
              description: List of including tags. They will be used for searching.
              items:
                type: string
            excludeTags:
              type: array
              description: List of excluding tags. They will be used for searching.
              items:
                type: string
            options:
              type: object
              properties:
                after:
                  type: number
                first:
                  type: number
                before:
                  type: number
                last:
                  type: number
                token:
                  type: string
          required:
            - channelId
  responses:
    "200000":
      $ref: "./response.yaml#/MessageResponse"
create:
  summary: create a text message.
  tags:
    - Admin
  security:
    - BearerAuth: []
  consumes:
    - application/json
  description: >
    Create a text message in a given channel.
  requestBody:
    description: >
      Information of message to be created.
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            channelId:
              type: string
            type:
              type: string
              value: text
            data:
              type: object
              properties:
                caption:
                  type: string
                  maxLength: 1000
            tags:
              type: array
              items:
                type: string
            parentId:
              type: string
          required:
            - channelId
            - type
            - data
  responses:
    "200000":
      $ref: "./response.yaml#/MessageResponse"
    "400400":
      $ref: "../../global/error.yaml#/ChannelNotFoundError"
    "400301":
      $ref: "../../global/error.yaml#/PermissionDenidedError"
    "400311":
      $ref: "../../global/error.yaml#/RateLimitError"
    "500000":
      $ref: "../../global/error.yaml#/UnexpectedError"

createImageMessage:
  summary: create an image message.
  tags:
    - Admin
  security:
    - BearerAuth: []
  consumes:
    - multipart/form-data
  description: >
    Create a image message in a given channel.
  requestBody:
    description: >
      Information of message to be created.
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            channelId:
              type: string
            caption:
              type: string
            file:
              type: object
            tags:
              type: array
              items:
                type: string
            parentId:
              type: string
            fullImage:
              type: string
          required:
            - channelId
            - file
  responses:
    "200000":
      $ref: "./response.yaml#/MessageResponse"
    "400400":
      $ref: "../../global/error.yaml#/ChannelNotFoundError"
    "400301":
      $ref: "../../global/error.yaml#/PermissionDenidedError"
    "400311":
      $ref: "../../global/error.yaml#/RateLimitError"
    "500000":
      $ref: "../../global/error.yaml#/UnexpectedError"
getImageMessage:
  summary: get an image message
  tags:
    - Admin
  security:
    - BearerAuth: [] 
  parameters:
    - name: messageId
      in: path
      required: true
      schema:
        type: string
    - name: size
      in: query
      required: true
      schema:
        type: string
        enum:
          - small
          - medium
          - large
          - full (if fullImage)
  consumes:
    - application/json
  description: >
    Get a message with image in a given channel.
  responses:
    "200000":
      description: An image file
    "400400":
      $ref: "../../global/error.yaml#/ChannelNotFoundError"
    "400301":
      $ref: "../../global/error.yaml#/PermissionDenidedError"
    "400311":
      $ref: "../../global/error.yaml#/RateLimitError"
    "500000":
      $ref: "../../global/error.yaml#/UnexpectedError"
createFileMessage:
  summary: create a message with file in a given channel
  tags:
    - Admin
  security:
    - BearerAuth: []
  consumes:
    - multipart/form-data
  description: >
    Create a message with file in a given channel.
  requestBody:
    description: >
      information of a message to be created.
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            channelId:
              type: string
            caption:
              type: string
            file:
              type: object
            tags:
              type: array
              items:
                type: string
            parentId:
              type: string
          required:
            - channelId
            - file
  responses:
    "200000":
      $ref: "./response.yaml#/MessageResponse"
    "400400":
      $ref: "../../global/error.yaml#/ChannelNotFoundError"
    "400301":
      $ref: "../../global/error.yaml#/PermissionDenidedError"
    "400311":
      $ref: "../../global/error.yaml#/RateLimitError"
    "500000":
      $ref: "../../global/error.yaml#/UnexpectedError"
getFileMessage:
  summary: get a file message
  tags:
    - Admin
  security:
    - BearerAuth: []
  parameters:
    - name: messageId
      in: path
      required: true
      schema:
        type: string
  consumes:
    - application/json
  description: >
    Get a message with file in a given channel.
  responses:
    "200000":
      description: A file
    "400400":
      $ref: "../../global/error.yaml#/ChannelNotFoundError"
    "400301":
      $ref: "../../global/error.yaml#/PermissionDenidedError"
    "400311":
      $ref: "../../global/error.yaml#/RateLimitError"
    "500000":
      $ref: "../../global/error.yaml#/UnexpectedError"
  

Messages:
  post:
    summary: 'Query messages.'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    consumes:
      - 'application/json'
    requestBody:
      description: "condition for querying\n"
      required: true
      content:
        application/json:
          schema:
            type: 'object'
            properties:
              channelId:
                type: 'string'
              parentId:
                type: 'string'
              filterByParentId:
                type: 'boolean'
              tags:
                type: 'array'
                description: 'List of including tags. They will be used for searching.'
                items:
                  type: 'string'
              excludeTags:
                type: 'array'
                description: 'List of excluding tags. They will be used for searching.'
                items:
                  type: 'string'
              options:
                type: 'object'
                properties:
                  after:
                    type: 'number'
                  first:
                    type: 'number'
                  before:
                    type: 'number'
                  last:
                    type: 'number'
                  token:
                    type: 'string'
            required:
              - 'channelId'
    responses:
      '200000':
        $ref: './response.yaml#/MessageResponse'


Message:
  post:
    summary: 'create a text message.'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    consumes:
      - 'application/json'
    description: "Create a text message in a given channel.\n"
    requestBody:
      description: "Information of message to be created.\n"
      required: true
      content:
        application/json:
          schema:
            type: 'object'
            properties:
              channelId:
                type: 'string'
              type:
                type: 'string'
                value: 'text'
              data:
                type: 'object'
                properties:
                  caption:
                    type: 'string'
                    maxLength: 1000
              tags:
                type: 'array'
                items:
                  type: 'string'
              parentId:
                type: 'string'
            required:
              - 'channelId'
              - 'type'
              - 'data'
    responses:
      '200000':
        $ref: './response.yaml#/MessageResponse'
      '400301':
        $ref: '../../global/error.yaml#/PermissionDenidedError'
      '400311':
        $ref: '../../global/error.yaml#/RateLimitError'
      '400400':
        $ref: '../../global/error.yaml#/ChannelNotFoundError'
      '500000':
        $ref: '../../global/error.yaml#/UnexpectedError'


MessagesImages:
  post:
    summary: 'create an image message.'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    consumes:
      - 'multipart/form-data'
    description: "Create a image message in a given channel.\n"
    requestBody:
      description: "Information of message to be created.\n"
      required: true
      content:
        application/json:
          schema:
            type: 'object'
            properties:
              channelId:
                type: 'string'
              caption:
                type: 'string'
              file:
                type: 'object'
              tags:
                type: 'array'
                items:
                  type: 'string'
              parentId:
                type: 'string'
              fullImage:
                type: 'string'
            required:
              - 'channelId'
              - 'file'
    responses:
      '200000':
        $ref: './response.yaml#/MessageResponse'
      '400301':
        $ref: '../../global/error.yaml#/PermissionDenidedError'
      '400311':
        $ref: '../../global/error.yaml#/RateLimitError'
      '400400':
        $ref: '../../global/error.yaml#/ChannelNotFoundError'
      '500000':
        $ref: '../../global/error.yaml#/UnexpectedError'


MessagesMessageIdImages:
  get:
    summary: 'get an image message'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    parameters:
      - name: 'messageId'
        in: 'path'
        required: true
        schema:
          type: 'string'
      - name: 'size'
        in: 'query'
        required: true
        schema:
          type: 'string'
          enum:
            - 'small'
            - 'medium'
            - 'large'
            - 'full (if fullImage)'
    consumes:
      - 'application/json'
    description: "Get a message with image in a given channel.\n"
    responses:
      '200000':
        description: 'An image file'
      '400301':
        $ref: '../../global/error.yaml#/PermissionDenidedError'
      '400311':
        $ref: '../../global/error.yaml#/RateLimitError'
      '400400':
        $ref: '../../global/error.yaml#/ChannelNotFoundError'
      '500000':
        $ref: '../../global/error.yaml#/UnexpectedError'


MessagesFiles:
  post:
    summary: 'create a message with file in a given channel'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    consumes:
      - 'multipart/form-data'
    description: "Create a message with file in a given channel.\n"
    requestBody:
      description: "information of a message to be created.\n"
      required: true
      content:
        application/json:
          schema:
            type: 'object'
            properties:
              channelId:
                type: 'string'
              caption:
                type: 'string'
              file:
                type: 'object'
              tags:
                type: 'array'
                items:
                  type: 'string'
              parentId:
                type: 'string'
            required:
              - 'channelId'
              - 'file'
    responses:
      '200000':
        $ref: './response.yaml#/MessageResponse'
      '400301':
        $ref: '../../global/error.yaml#/PermissionDenidedError'
      '400311':
        $ref: '../../global/error.yaml#/RateLimitError'
      '400400':
        $ref: '../../global/error.yaml#/ChannelNotFoundError'
      '500000':
        $ref: '../../global/error.yaml#/UnexpectedError'


MessagesMessageIdFiles:
  get:
    summary: 'get a file message'
    tags:
      - 'Admin'
    security:
      - BearerAuth: []
    parameters:
      - name: 'messageId'
        in: 'path'
        required: true
        schema:
          type: 'string'
    consumes:
      - 'application/json'
    description: "Get a message with file in a given channel.\n"
    responses:
      '200000':
        description: 'A file'
      '400301':
        $ref: '../../global/error.yaml#/PermissionDenidedError'
      '400311':
        $ref: '../../global/error.yaml#/RateLimitError'
      '400400':
        $ref: '../../global/error.yaml#/ChannelNotFoundError'
      '500000':
        $ref: '../../global/error.yaml#/UnexpectedError'
